{% extends 'base.html.twig' %}

{% block title %}Utilisateur -
	{{ utilisateur.pseudo }}
{% endblock %}

{% block breadcrumb %}
	<nav aria-label="breadcrumb" class="mb-4">
		<ol class="breadcrumb">
			<li class="breadcrumb-item">
				<a href="{{ path('app_home') }}">Accueil</a>
			</li>
			<li class="breadcrumb-item">
				<a href="{{ path('app_utilisateur_index') }}">Utilisateurs</a>
			</li>
			<li class="breadcrumb-item active" aria-current="page">{{ utilisateur.pseudo }}</li>
		</ol>
	</nav>
{% endblock %}

{% block body %}
	<div class="row justify-content-center">
		<div class="col-md-8">
			<div class="card shadow-sm">
				<div class="card-header bg-white d-flex justify-content-between align-items-center">
					<h1 class="h3 mb-0">
						<i class="bi bi-person-circle text-primary"></i>
						{{ utilisateur.prenom }}
						{{ utilisateur.nom }}
					</h1>
					<span class="badge bg-primary fs-6">{{ utilisateur.pseudo }}</span>
				</div>
				<div class="card-body">
					<div class="row">
						<div class="col-md-4 text-center mb-4">
							{% if utilisateur.imageProfil %}
								<img src="{{ asset(utilisateur.imageProfil) }}" alt="Photo de profil" class="rounded-circle shadow" style="width: 150px; height: 150px; object-fit: cover;">
							{% else %}
								<div class="rounded-circle bg-light d-flex align-items-center justify-content-center mx-auto shadow" style="width: 150px; height: 150px;">
									<i class="bi bi-person-fill text-muted" style="font-size: 4rem;"></i>
								</div>
							{% endif %}
							<h5 class="mt-3">{{ utilisateur.prenom }}
								{{ utilisateur.nom }}</h5>
							<p class="text-muted">@{{ utilisateur.pseudo }}</p>
						</div>
						<div class="col-md-8">
							<table class="table table-borderless">
								<tbody>
									<tr>
										<th class="text-muted" style="width: 40%">
											<i class="bi bi-envelope me-2"></i>Email</th>
										<td>
											<a href="mailto:{{ utilisateur.mail }}" class="text-decoration-none">{{ utilisateur.mail }}</a>
										</td>
									</tr>
									<tr>
										<th class="text-muted">
											<i class="bi bi-calendar-event me-2"></i>Date de naissance</th>
										<td>{{ utilisateur.dateNaissance ? utilisateur.dateNaissance|date('d/m/Y') : '-' }}</td>
									</tr>
									<tr>
										<th class="text-muted">
											<i class="bi bi-controller me-2"></i>Collection</th>
										<td>
											{% if utilisateur.collects|length > 0 %}
												<a href="{{ path('app_collection_show', {'id': utilisateur.id}) }}" class="badge bg-success text-decoration-none">
													{{ utilisateur.collects|length }}
													jeux
												</a>
											{% else %}
												<span class="badge bg-secondary">Aucun jeu</span>
											{% endif %}
										</td>
									</tr>
									<tr>
										<th class="text-muted">
											<i class="bi bi-calendar-plus me-2"></i>Inscrit le</th>
										<td>{{ utilisateur.createdAt ? utilisateur.createdAt|date('d/m/Y à H:i') : '-' }}</td>
									</tr>
									{% if utilisateur.updatedAt %}
										<tr>
											<th class="text-muted">
												<i class="bi bi-pencil me-2"></i>Mis à jour le</th>
											<td>{{ utilisateur.updatedAt|date('d/m/Y à H:i') }}</td>
										</tr>
									{% endif %}
								</tbody>
							</table>
						</div>
					</div>
				</div>
				<div class="card-footer bg-light d-flex justify-content-between align-items-center">
					<a href="{{ path('app_utilisateur_index') }}" class="btn btn-secondary">
						<i class="bi bi-arrow-left"></i>
						Retour à la liste
					</a>
					<div>
						<a href="{{ path('app_collection_show', {'id': utilisateur.id}) }}" class="btn btn-info me-2">
							<i class="bi bi-collection"></i>
							Voir la collection
						</a>
						<a href="{{ path('app_utilisateur_edit', {'id': utilisateur.id}) }}" class="btn btn-warning me-2">
							<i class="bi bi-pencil"></i>
							Modifier
						</a>
						{{ include('utilisateur/_delete_form.html.twig') }}
					</div>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
